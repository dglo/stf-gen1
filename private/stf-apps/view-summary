#!d:\apps\msys-1.0\bin\sh.exe

#
# include common routines/variables
#
source /e/arthur/xml/bin/common.sh

#
# view-summary
#
echo "Content-type: text/html"
echo

echo "<html>"
echo "  <head>"
echo "    <title>Summary</title>"
echo "  </head>"
echo "  <body>"

#
# FIXME: check for parameters -- add link to search...
#
nentries=`echo ${QUERY_STRING} | qryParam entries`
if [ ${#nentries} == 0 ]; then
    nentries=100
fi

grep -E "^[0-9]* (memory)|(StfEg) (epxa10-eval-board) (true)|(false) " /e/arthur/xml/summary | \
    sort -r | \
    tail -${nentries} | \
    awk -f /e/arthur/xml/bin/sumtotable.awk

#
# FIXME: search code goes here...
#
echo "  <hr>"
echo "  <form method=\"GET\" action=\"view-summary\">"
echo "    <p>Last: <input name=\"entries\" value=\"${nentries}\"></input>"
echo "    <button type=\"submit\" value=\"Search\">Search</button>"
echo "    <input type=\"checkbox\" name=\"memory\" checked=\"true\" value=\"true\">memory</input>"
echo "  </form>"

echo "  </body>"
echo "</html>"
